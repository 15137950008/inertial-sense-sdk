<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>SDK: README.md Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="Logo_Full_color_300x61.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">SDK
   &#160;<span id="projectnumber">Release 1.1.5</span>
   </div>
   <div id="projectbrief">Communications, logger, and bootloader libraries.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">README.md</div>  </div>
</div><!--header-->
<div class="contents">
<a href="_r_e_a_d_m_e_8md.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;**SDK** - The Inertial Sense open source software development kit provides quick integration for communication with the Inertial Sense product line, including the uINS, uAHRS, and uINS.  It includes data logger, math libraries, and serial port interface for Linux and Windows environments.   </div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;**EvalTool** - Graphical Windows-based desktop program that allows you to explore and test functionality of the Inertial Sense products in real-time.  It has scrolling plots, 3D model representation, table views of all data, data logger, and firmware updating interface for the uINS, uAHRS, or uIMU. The EvalTool can simultaneously interface with multiple Inertial Sense devices.</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;</div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;**CLTool** - Command line utility that can be used to communicate, log data, and update firmware for Inertial Sense products.  Additionally, InertialSenseCLTool serves as example source code to demonstrate how to integrate the Inertial Sense SDK into your own source code.  The InertialSenseCLTool can be compiled in Linux and Windows. </div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;</div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;### Documents</div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;</div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160; * [SDK Documentation](http://docs.inertialsense.com/)</div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160; * [User Manual, Datasheet, and Release Notes](https://github.com/inertialsense/InertialSenseSDK/releases)</div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;</div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;### Downloads</div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;</div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160; * [SDK &amp; CLTool Binaries](https://github.com/inertialsense/InertialSenseSDK/releases) - pre-compiled release static libraries and executables for Linux and Windows.</div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160; * [SDK &amp; CLTool Source Code](https://github.com/inertialsense/InertialSenseSDK) - open source SDK repository with command line tool and example C/C++ source code.</div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160; * [Firmware and EvalTool](https://github.com/inertialsense/InertialSenseSDK/releases) - uINS, uAHRS, and uIMU firmware and Windows application installer.</div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;</div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;### Design Resources</div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;</div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160; * [uINS PCB Design Libraries](https://inertialsense.com/resources) - Schematic and layout files for printed circuit board designs.</div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160; * [uINS, uAHRS, uIMU CAD Model](https://inertialsense.com/resources) - 3D step model of uINS and EVB used for CAD and circuit board designs.</div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;</div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;### Support</div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;</div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160; * Email - support@inertialsense.com</div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;</div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;************************************************</div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;## CLTool Instructions</div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;</div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;#### Compiling in Linux</div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;</div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;1. Create build directory inside SDK/InertialSenseCLTool/.</div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;</div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;        $ cd InertialSenseCLTool</div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;        $ mkdir build</div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;</div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;2. Run cmake from within build directory.</div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;</div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;        $ cd build</div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;        $ cmake ..</div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;</div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160; to cross-compile to 32 or 64 bit:</div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;</div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;        sudo apt-get install libc6-dev-i386</div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;        sudo apt-get install gcc-multilib g++-multilib</div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;</div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160; 32 bit</div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;</div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;        cmake .. -DCMAKE_CXX_FLAGS=-m32 -DCMAKE_C_FLAGS=-m32</div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;</div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160; 64 bit</div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;</div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;        cmake .. -DCMAKE_CXX_FLAGS=-m64 -DCMAKE_C_FLAGS=-m64</div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;</div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;3. Compile using make.</div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;</div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;        $ make</div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;4. Add current user to the &quot;dialout&quot; group in order to read and write to the USB serial communication ports:</div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;</div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;        $ sudo usermod -a -G dialout $USER</div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;        $ sudo usermod -a -G plugdev $USER</div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;</div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160; (**Reboot computer**)</div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;</div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;5. Run executable</div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;</div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;        $ ./bin/cltool</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;</div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;#### Compiling in Windows (MS Visual Studio)</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;1. Open Visual Studio solution file (InertialSenseCLTool.sln).</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;</div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;2. Build (F5 or F7).</div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;</div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;************************************************</div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;# SDK API</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;The InertialSense Software Development Kit (SDK) is used to communicate, data log, and update firmware with the Inertial Sense products.  The InertialSenseCLTool command line tool, included in the SDK, is provided as an example for both C++ and C implementation.  The following keywords are in the cltool_main.cpp and InertialSense.cpp files to identify the necessary steps for implementation.</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;| Keyword | SDK Implementation |</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;| ------------------- | :---------- |</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;| [C++ COMM INSTRUCTION] | C++ binding API - InertialSense class with binary communication protocol and serial port support for Linux and Windows. |</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;| [C COMM INSTRUCTION] | C binding API - Com Manager with binary communication protocol. |</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;| [LOGGER INSTRUCTION] | Data logger. |</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;| [BOOTLOADER INSTRUCTION] | Firmware update. |</div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;### C++ Binding API</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;#### InertialSense C++ Class</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;The InertialSense C++ class, defined in InertialSense.h/.cpp, is provided to simplify the process of communicating with the binary protocol, logging, and updating firmware with the InertialSense products.  It is designed primarily around the Inertial Sense binary protocol.  </div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;</div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;* Include the InertialSense header file.</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;```c</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;#include &quot;InertialSense.h&quot;</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;```</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;* Create InertialSense object and open serial port.</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;```c</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;// [C++ COMM INSTRUCTION] 1.) Create InertialSense object, passing in data callback function pointer.</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;InertialSense inertialSenseInterface(cltool_dataCallback);</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;// [C++ COMM INSTRUCTION] 2.) Open serial port.</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;if (!inertialSenseInterface.Open(g_commandLineOptions.comPort.c_str()))</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;{  </div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;   cout &lt;&lt; &quot;Failed to open serial port at &quot; &lt;&lt; g_commandLineOptions.comPort.c_str() &lt;&lt; endl;</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;   return -1;  // Failed to open serial port</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;}</div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;```</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;* Enable data broadcasting from the uINS.</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;```c</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;// [C++ COMM INSTRUCTION] 3.) Enable data broadcasting from uINS.</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;cltool_setupCommunications(inertialSenseInterface);</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;```</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;* Call the Update() method at regular intervals to send and receive data.</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;```c</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;// Main loop. Could be in separate thread if desired.</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;while (!g_inertialSenseDisplay.ControlCWasPressed())</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;{</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;   // [C++ COMM INSTRUCTION] 4.) Process data and messages.</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;   if (!inertialSenseInterface.Update())</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;   {</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;       // device disconnected, exit</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;       break;</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;   }</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;}</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;```</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;* New data is available in the data callback function.</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;```c</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;// [C++ COMM INSTRUCTION] 5.) This function is called every time there is new data.</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;void cltool_dataCallback(InertialSense* i, p_data_t* data)</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;{</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;   // Print data to terminal</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;   g_inertialSenseDisplay.ProcessData(data);</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;   // uDatasets is a union of all datasets that we can receive.  See data_sets.h for a full list of all available datasets. </div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;   uDatasets d = {};</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;   copyDataPToStructP(&amp;d, data, sizeof(uDatasets));</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;   // Example of how to access dataset fields.</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;   switch (data-&gt;hdr.id)</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;   {</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;   case DID_INS_2:        </div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;       d.ins2.qn2b;        // quaternion attitude </div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;       d.ins2.uvw;         // body velocities</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;       d.ins2.lla;         // latitude, longitude, altitude</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;       break;</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;   case DID_INS_1:             </div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;       d.ins1.theta;       // euler attitude</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;       d.ins1.lla;         // latitude, longitude, altitude</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;       break;</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;   case DID_DUAL_IMU:          d.dualImu;      break;</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;   case DID_DELTA_THETA_VEL:   d.dThetaVel;    break;</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;   case DID_IMU_1:             d.imu;          break;</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;   case DID_IMU_2:             d.imu;          break;</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;   case DID_GPS:               d.gps;          break;</div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;   case DID_MAGNETOMETER_1:    d.mag;          break;</div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;   case DID_MAGNETOMETER_2:    d.mag;          break;</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;   case DID_BAROMETER:         d.baro;         break;</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;   case DID_SYS_SENSORS:       d.sysSensors;   break;</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;   }</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;}</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;```</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;* Close interface when done.</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;```c</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;// [C++ COMM INSTRUCTION] 6.) Close cleanly to ensure serial port and logging are shutdown properly. (optional)</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;inertialSenseInterface.Close();</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;```</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;#### Data Logging</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;* To configure and start the data logger.</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;```c</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;// [LOGGER INSTRUCTION] Setup and start data logger</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;if (!cltool_setupLogger(inertialSenseInterface))</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;{</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;   cout &lt;&lt; &quot;Failed to setup logger!&quot; &lt;&lt; endl;</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;   return -1;</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;}</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;```</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;### C Binding API</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;For pure C solutions such as embedded systems or situations where memory is limited, the C binding API is provided. The C binding contains an interface for communicating with the device using the binary protocol, as well as updating firmware (discussed later).</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;#### ComManager C Library</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;The ComManager pure C library provides a method to communicate, data log, and update firmware with the uINS, uAHRS, and uIMU.  It is designed primarily around the Inertial Sense binary protocol</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;* Include the Com Manager and data sets header files.</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;```c</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;// [C COMM INSTRUCTION]  Include data_sets.h and com_manager.h  </div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;#include &quot;data_sets.h&quot;</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;#include &quot;com_manager.h&quot;</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;```</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;* Initialized the Com Manager.</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;```c</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;// [C COMM INSTRUCTION]  1.) Setup com manager.  Specify number of serial ports and register callback functions for</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;// serial port read and write and for successfully parsed data.</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;initComManager((int)m_comManagerState.serialPorts.size(), 10, 10, 10, staticReadPacket, staticSendPacket, 0, staticProcessRxData, 0, 0);</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;```</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;* The stepComManager() function must be called at regular intervals to send and receive data.</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;```c</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;// Main loop.  Could be in separate thread if desired.</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;while (!g_ctrlCPressed)</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;{</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;   // [C COMM INSTRUCTION]  2.) Update Com Manager at regular interval to send and receive data.  </div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;   // Normally called within a while loop.  Include a thread &quot;sleep&quot; if running on a multi-thread/</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;   // task system with serial port read function that does NOT incorporate a timeout.   </div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;   stepComManager();</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;   // SLEEP_MS(1);</div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;}</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;```</div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;</div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;* Get data from the uINS.</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;```c</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;// [C COMM INSTRUCTION]  3.) Request a specific data set from the uINS.  &quot;periodMs&quot; specifies the interval</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;// between broadcasts and &quot;periodMs=0&quot; will disable broadcasts and transmit one single message. </div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;getDataComManager(i, dataId, 0, 0, periodMS);</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;```</div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;* Send data to the uINS.</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;</div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;```c</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;// [C COMM INSTRUCTION]  4.) Send data to the uINS.  </div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;sendDataComManager((int)i, dataId, data, length, offset);</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;```</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;* Disable all broadcasting and streaming from the uINS.</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;```c</div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;// [C COMM INSTRUCTION]  Turns off (disable) all broadcasting and streaming on all ports from the uINS.</div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;sendComManager((int)i, PID_STOP_ALL_BROADCASTS, 0, 0, 0);</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;```</div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;</div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;* Turn off broadcasting of one DID message from the uINS.</div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;```c</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;// [C COMM INSTRUCTION]  Stop broadcasting of one specific DID message from the uINS.</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;disableDataComManager(i, dataId);</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;```</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;* Turn off broadcasting of one DID message from the uINS.</div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;</div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;```c</div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;// [C COMM INSTRUCTION]  Stop broadcasting of one specific DID message from the uINS.</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;disableDataComManager(i, dataId);</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;```</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;* Enable solution data streaming for data logging.</div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;</div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;```c</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;// [C COMM INSTRUCTION]  Enable solution streaming used for data logging.</div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;// Recommended default is solStreamCtrl = SOL_STREAM_PPD1_INS2.</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;sendDataComManager((int)i, DID_CONFIG, &amp;m_comManagerState.config[i].solStreamCtrl, sizeof(m_comManagerState.config[i].solStreamCtrl), OFFSETOF(config_t, solStreamCtrl));</div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;```</div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;</div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;#### Updating Firmware (Bootloader)</div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;</div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;* To execute the bootloader, call cltool_runBootloader().  This function may be called directly or duplicated for your purposes.</div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;</div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;```c</div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;// [BOOTLOADER INSTRUCTIONS] Update firmware</div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;return cltool_runBootloader(g_commandLineOptions.comPort.c_str(), g_commandLineOptions.bootloaderFileName.c_str(), NULL);</div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;```</div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;</div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;</div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;************************************************</div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;(c) 2014 Inertial Sense, LLC</div></div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Thu Mar 22 2018 02:53:10 for SDK by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.14
</small></address>
</body>
</html>
